"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4807],{8655:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return r},default:function(){return c},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return l}});var o=n(5773),a=(n(7378),n(5318));const i={sidebar_position:1,title:"Build a Notification Center for your Next.js Blog"},r=void 0,s={unversionedId:"learn-by-examples/nextjs-supabase/part1",id:"learn-by-examples/nextjs-supabase/part1",title:"Build a Notification Center for your Next.js Blog",description:"Article originally posted on dev.to",source:"@site/docs/learn-by-examples/nextjs-supabase/part1.md",sourceDirName:"learn-by-examples/nextjs-supabase",slug:"/learn-by-examples/nextjs-supabase/part1",permalink:"/docs/learn-by-examples/nextjs-supabase/part1",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/learn-by-examples/nextjs-supabase/part1.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Build a Notification Center for your Next.js Blog"},sidebar:"tutorialSidebar",previous:{title:"Simple Notification Using Hooks",permalink:"/docs/learn-by-examples/react-hooks/simple-notification"},next:{title:"Basics of Preference Center",permalink:"/docs/learn-by-examples/notification-preference-center/concepts"}},l=[{value:"Creating the Blog Site",id:"creating-the-blog-site",children:[],level:3},{value:"Sending Notifications from the Dashboard",id:"sending-notifications-from-the-dashboard",children:[],level:3},{value:"Styling the Notification Center",id:"styling-the-notification-center",children:[],level:3},{value:"Conclusion",id:"conclusion",children:[],level:3}],p={toc:l};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Article originally posted on dev.to")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Build a Notification Center for your Next.js Blog (3 Part Series)"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1."),(0,a.kt)("a",{parentName:"td",href:"https://dev.to/h3mandev/build-a-full-fledged-notification-center-on-your-react-app-using-engagespot-part-1-39jn"},"Creating the basic blog structure and integrating the Notification Component using ",(0,a.kt)("inlineCode",{parentName:"a"},"@engagespot/react-component")))))),(0,a.kt)("p",null,"| 2. Backend support for Like, Follow, Comments\n| 3. Implementing View All Notification Page using ",(0,a.kt)("inlineCode",{parentName:"p"},"@engagespot/react-hooks")," |\n| 4. Bonus - Supporting android and ios using react-native |"),(0,a.kt)("p",null,"It's no secret that notifications have become an integral part of our lives. Whether it's to inform someone liked your photo on Instagram or to notify that your order is coming soon, the Notification and Notification center has been evolved into a humongous beast in today's world."),(0,a.kt)("p",null,"Due to the sheer complexity involving notifications, implementing it from scratch is nothing short of a challenge itself. Creating the notification center UI, implementing WebPush, Email fallbacks, adding multiple channels... The list goes on and on..."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://engagespot.co/"},"Engagespot")," makes it easy to add in-app notification widget, real-time, and push notification features to your product with just a few lines of code."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Disclamer: I am one of the maintainers of Engagespot")),(0,a.kt)("p",null,"In this 3 part series, we will create a simple blog site where users can add posts, like, comment, and follow other authors. We will have a notification center at the top, which will send out notifications for the above cases. The first part will focus on creating the basic blog site and adding the notification center component. I will be updating links to the upcoming articles above as it goes live. So without further ado, let's get started."),(0,a.kt)("h3",{id:"creating-the-blog-site"},"Creating the Blog Site"),(0,a.kt)("p",null,"We'll be using ",(0,a.kt)("a",{parentName:"p",href:"https://nextjs.org/"},"Next.js")," and ",(0,a.kt)("a",{parentName:"p",href:"https://supabase.com/"},"Supabase")," as our tech stack. I won't be focusing too much on the implementation details of the blog, but if you want to follow along, do\nand do"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/hemandev/blog-with-notifications\ncd blog-with-notifications\ngit checkout tags/blog_starter\nnpm i\nnpm run dev\n")),(0,a.kt)("p",null,"Make sure to populate the superbase URL and keys before starting the server."),(0,a.kt)("p",null,"Here's how the DB schema for the blog looks like"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ao0lzk2o9pvs5nrkwlid.png",alt:"DB Schema"})),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"I was using ",(0,a.kt)("a",{parentName:"em",href:"https://supabase-schema.vercel.app/"},"Supabase Visualizer")," for generating the schema, and it was not able to detect the default user table)")),(0,a.kt)("p",null,"Let's take a look at our current blog."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/5yxmkucbpuv6dfxv98up.png",alt:"Home Page"}),"\n",(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/lpjo49901nnyiuw9o2bn.png",alt:"Post Page"})),(0,a.kt)("p",null,"So far, we have implemented the basic functionalities like authentication, creating new articles, adding comments, following..."),(0,a.kt)("p",null,"Everything looks good so far. The next step is to add in the notifications. Let's go to ",(0,a.kt)("a",{parentName:"p",href:"https://engagespot.co/"},"Engagespot Website")," and set up a free account"),(0,a.kt)("p",null,'After signing up, create a new app called "My Blog App," copy the API key and secret and keep it for later.'),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fwr2ylxxfe7dnmm36exi.png",alt:"Engagespot Dashboard"})),(0,a.kt)("p",null,"Add the Enagegspot React component as a dependency in our Next.js project."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"npm i @engagespot/react-component")),(0,a.kt)("p",null,"I want the notification button to come on the top navigation. So let's add it into the header component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"//components/header.tsx\nimport { Auth } from '@supabase/ui';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { supabaseClient } from '../lib/supabase/client';\nimport { Engagespot } from '@engagespot/react-component';\nimport { User } from '@supabase/supabase-js';\n\ninterface HeaderProps {\n  user: User;\n}\n\nfunction Header({ user }: HeaderProps) {\n  //const { user, session } = Auth.useUser()\n  const router = useRouter();\n  return (\n    <header className=\"pb-6\">\n      <nav className=\"flex gap-4 items-center\">\n        <Link href=\"/\">\n          <a>Home</a>\n        </Link>\n        <button onClick={() => router.push(`/profile/${user?.email}`)}>\n          Profile\n        </button>\n        <Link href=\"/posts\">\n          <a className=\"mr-auto\">Posts</a>\n        </Link>\n        <Engagespot\n          apiKey={process.env.NEXT_PUBLIC_ENGAGESPOT_API_KEY}\n          userId={user?.email || ''}\n        />\n        <Link href=\"/create-new\">\n          <a className=\"bg-emerald-500 hover:bg-emerald-600 ease-in transition-all py-2 px-4  rounded text-white\">\n            Create New\n          </a>\n        </Link>\n        <button\n          onClick={async () => {\n            const { error } = await supabaseClient.auth.signOut();\n            if (error) console.log('Error logging out:', error.message);\n          }}\n        >\n          Logout\n        </button>\n      </nav>\n    </header>\n  );\n}\n\nexport default Header;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/zsqokfb65pph2xj8ay4r.png",alt:"Notification Center"})),(0,a.kt)("p",null,"Voila! Instant Notification Center!"),(0,a.kt)("p",null,"Let's break down what just happened."),(0,a.kt)("p",null,"We imported the ",(0,a.kt)("inlineCode",{parentName:"p"},"Engagespot />")," component on our ",(0,a.kt)("inlineCode",{parentName:"p"},"<Header/>."),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"Engagespot")," expects ",(0,a.kt)("inlineCode",{parentName:"p"},"apiKey")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"userId")," as mandatory properties. ",(0,a.kt)("inlineCode",{parentName:"p"},"apiKey")," is the one we copied over from the dashboard. ",(0,a.kt)("inlineCode",{parentName:"p"},"userId")," can be anything that can be used to identify a user uniquely. I'm passing email as the userId, but you can pass UUID, username, or any other unique field as well. On getting the userId, Engagespot will automatically create a user record in its system if it isn't already there. We can even pass additional user attributes which can define a user even more, and Engagespot can use it for more powerful features like notification grouping, mentioning, etc..."),(0,a.kt)("p",null,"There are many other properties that we can use to customize the default behaviors. Head to the ",(0,a.kt)("a",{parentName:"p",href:"https://documentation.engagespot.co/"},"docs")," section for the complete list of properties. Once you're done exploring, let's try sending a notification to see how it's coming."),(0,a.kt)("h3",{id:"sending-notifications-from-the-dashboard"},"Sending Notifications from the Dashboard"),(0,a.kt)("p",null,"Now that we integrated the notification component into your app let's try sending a notification and see how it's coming.\nWe haven't integrated the API to send out the notifications. Luckily, we can use the Compose feature to send notifications directly without needing to configure any API. This can be useful for testing and other cases where you need to send targeted notifications to some users."),(0,a.kt)("p",null,"Head into the Compose section and start adding the details regarding the recipient, title, and content."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/s0q1jwa4cebujpjib5td.png",alt:"Compose Section in Engagespot Dashboard"})),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"title")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"content")," fields support Rich Text so that we can be creative with our notification content. Click on Submit and go back to your site."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/eveo47wsa3vvrncaikeu.png",alt:"Notification Center with messages"})),(0,a.kt)("p",null,"Looks pretty sick!"),(0,a.kt)("p",null,"Let's head to the final section, where we'll customize the Notification Center and make it truly belong to our site belong."),(0,a.kt)("h3",{id:"styling-the-notification-center"},"Styling the Notification Center"),(0,a.kt)("p",null,"Engagespot supports a ",(0,a.kt)("inlineCode",{parentName:"p"},"theme")," property that allows extensive customizations on the look and feel of its Notification Center component. Again, head to the ",(0,a.kt)("a",{parentName:"p",href:"https://documentation.engagespot.co/"},"docs")," to get a complete picture of what all can be customized. Or, if you're using VSCode and Typescript, you can rely on the type definitions from the ",(0,a.kt)("inlineCode",{parentName:"p"},"@engagespot/react-component")," package and keep experimenting as you go along."),(0,a.kt)("p",null,"Right now, I am just mainly looking to change the notification icon color to black and the header to ",(0,a.kt)("inlineCode",{parentName:"p"},"RGB(16 185 129)")," to align with our site more. Let's see how to do that."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"<Engagespot\n  apiKey={process.env.NEXT_PUBLIC_ENGAGESPOT_API_KEY}\n  userId={user?.email || ''}\n  theme={{\n    panel: {\n      height: '35rem',\n      width: '27rem',\n    },\n    notificationButton: {\n      iconFill: '#000',\n    },\n    colors: {\n      brandingPrimary: 'rgb(16 185 129)',\n    },\n    header: {\n      height: '2.5rem',\n    },\n    footer: {\n      height: '2.5rem',\n    },\n  }}\n/>\n")),(0,a.kt)("p",null,"As you can see, while I was at it, I just changed the panel, header, and footer width so that it looks cleaner in our small width site."),(0,a.kt)("p",null,"Let's check out the final result."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/6mqh4ph427fg0rod7u5s.png",alt:"Final Blog Page"})),(0,a.kt)("p",null,"Now that's more like it!"),(0,a.kt)("p",null,"Here's the final code for the ",(0,a.kt)("inlineCode",{parentName:"p"},"Header")," component"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import { Auth } from '@supabase/ui';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { supabaseClient } from '../lib/supabase/client';\nimport { Engagespot } from '@engagespot/react-component';\nimport { User } from '@supabase/supabase-js';\n\ninterface HeaderProps {\n  user: User;\n}\n\nfunction Header({ user }: HeaderProps) {\n  //const { user, session } = Auth.useUser()\n  const router = useRouter();\n  return (\n    <header className=\"pb-6\">\n      <nav className=\"flex gap-4 items-center\">\n        <Link href=\"/\">\n          <a>Home</a>\n        </Link>\n        <button onClick={() => router.push(`/profile/${user?.email}`)}>\n          Profile\n        </button>\n        <Link href=\"/posts\">\n          <a className=\"mr-auto\">Posts</a>\n        </Link>\n        <Engagespot\n          apiKey={process.env.NEXT_PUBLIC_ENGAGESPOT_API_KEY}\n          userId={user?.email || ''}\n          theme={{\n            panel: {\n              height: '35rem',\n              width: '27rem',\n            },\n            notificationButton: {\n              iconFill: '#000',\n            },\n            colors: {\n              brandingPrimary: 'rgb(16 185 129)',\n            },\n            header: {\n              height: '2.5rem',\n            },\n            footer: {\n              height: '2.5rem',\n            },\n          }}\n        />\n        <Link href=\"/create-new\">\n          <a className=\"bg-emerald-500 hover:bg-emerald-600 ease-in transition-all py-2 px-4  rounded text-white\">\n            Create New\n          </a>\n        </Link>\n        <button\n          onClick={async () => {\n            const { error } = await supabaseClient.auth.signOut();\n            if (error) console.log('Error logging out:', error.message);\n          }}\n        >\n          Logout\n        </button>\n      </nav>\n    </header>\n  );\n}\n\nexport default Header;\n")),(0,a.kt)("p",null,"You can get the full project from ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/hemandev/blog-with-notifications"},"https://github.com/hemandev/blog-with-notifications")),(0,a.kt)("h3",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"I am going to stop for now but we haven't event scratched the surface of Engagespot yet! In the next article we'll see how to integrate APIs to send notifications when someone follows you or when someone like and comment on your post. We'll also see cover Desktop Notifications, Email fallbacks, Category specific preferences and much more!"))}c.isMDXComponent=!0},5318:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var o=n(7378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,h=m["".concat(l,".").concat(d)]||m[d]||u[d]||i;return n?o.createElement(h,r(r({ref:t},c),{},{components:n})):o.createElement(h,r({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var p=2;p<i;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);